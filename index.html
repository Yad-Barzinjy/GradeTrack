<!doctype html>
<html lang="de">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />
    <meta name="theme-color" content="#007AFF" />
    <title>GradeTrack</title>
    <meta name="description" content="Erfasse, vergleiche und exportiere Schulnoten (1â€“6 oder 0â€“15 Punkte)." />
    
    <!-- Favicons -->
    <link rel="icon" type="image/png" href="/favicon-96x96.png" sizes="96x96" />
    <link rel="icon" type="image/svg+xml" href="/favicon.svg" />
    <link rel="shortcut icon" href="/favicon.ico" />
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png" />
    
    <link rel="manifest" href="/manifest.json" />
    <!-- Material Icons (MIT License) -->
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Rounded:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200" />
    <link rel="stylesheet" href="src/css/styles.css" />
  </head>
  <body role="application">
    <header class="app-header">
      <h1>GradeTrack</h1>
      <nav class="tabs" aria-label="Hauptnavigation">
        <button class="tab active" data-view="dashboard">
          <span class="material-symbols-rounded">dashboard</span>
          <span>Dashboard</span>
        </button>
        <button class="tab" data-view="faecher">
          <span class="material-symbols-rounded">school</span>
          <span>FÃ¤cher</span>
        </button>
        <button class="tab" data-view="uebersicht">
          <span class="material-symbols-rounded">summarize</span>
          <span>Ãœbersicht</span>
        </button>
        <button class="tab" data-view="entwicklungen">
          <span class="material-symbols-rounded">trending_up</span>
          <span>Entwicklung</span>
        </button>
        <button class="tab" data-view="ziele">
          <span class="material-symbols-rounded">flag</span>
          <span>Ziele</span>
        </button>
        <button class="tab" data-view="einstellungen">
          <span class="material-symbols-rounded">settings</span>
          <span>Einstellungen</span>
        </button>
      </nav>
    </header>

    <main id="app" class="container" tabindex="-1">
      <section id="view-dashboard" class="view active" aria-labelledby="dashboard-heading">
        <div id="dashboard-content"></div>
      </section>

      <section id="view-faecher" class="view" aria-labelledby="faecher-heading">
        <div class="toolbar">
          <h2 id="faecher-heading">FÃ¤cher</h2>
          <div class="toolbar-actions">
            <div class="view-toggle" role="group" aria-label="Ansicht wechseln">
              <button id="view-grid" class="btn-icon active" title="Kachelansicht" aria-pressed="true">
                <svg width="20" height="20" viewBox="0 0 20 20" fill="currentColor">
                  <rect x="2" y="2" width="7" height="7" rx="1"/>
                  <rect x="11" y="2" width="7" height="7" rx="1"/>
                  <rect x="2" y="11" width="7" height="7" rx="1"/>
                  <rect x="11" y="11" width="7" height="7" rx="1"/>
                </svg>
              </button>
              <button id="view-list" class="btn-icon" title="Listenansicht" aria-pressed="false">
                <svg width="20" height="20" viewBox="0 0 20 20" fill="currentColor">
                  <rect x="2" y="3" width="16" height="2" rx="1"/>
                  <rect x="2" y="9" width="16" height="2" rx="1"/>
                  <rect x="2" y="15" width="16" height="2" rx="1"/>
                </svg>
              </button>
            </div>
            <button id="add-subject" class="btn-primary">Fach hinzufÃ¼gen</button>
          </div>
        </div>
        <div id="subjects-list" class="grid"></div>
      </section>

      <section id="view-uebersicht" class="view" aria-labelledby="uebersicht-heading">
        <h2 id="uebersicht-heading">GesamtÃ¼bersicht</h2>
        <div id="overview"></div>
      </section>

      <section id="view-entwicklungen" class="view" aria-labelledby="entwicklungen-heading">
        <h2 id="entwicklungen-heading">Entwicklungen</h2>
        <canvas id="trends-canvas" width="800" height="300" role="img" aria-label="Notenentwicklungen"></canvas>
      </section>

      <section id="view-ziele" class="view" aria-labelledby="ziele-heading">
        <h2 id="ziele-heading">Ziele</h2>
        <div id="goals"></div>
      </section>

      <section id="view-einstellungen" class="view" aria-labelledby="settings-heading">
        <h2 id="settings-heading">Einstellungen</h2>
        
        <!-- Design -->
        <div class="settings-section">
          <h3>Design</h3>
          <fieldset class="field">
            <legend>Theme</legend>
            <label><input type="radio" name="theme" value="dark" checked /> ğŸŒ™ Dark Mode</label>
            <label><input type="radio" name="theme" value="light" /> â˜€ï¸ Light Mode</label>
          </fieldset>
        </div>

        <!-- Notensystem -->
        <div class="settings-section">
          <h3>Notensystem</h3>
          <fieldset class="field">
            <legend>Notensystem</legend>
            <label><input type="radio" name="grading" value="classic" checked /> 1â€“6 (mit 1+, 2- â€¦)</label>
            <label><input type="radio" name="grading" value="points" /> 0â€“15 Punkte (Oberstufe)</label>
          </fieldset>
        </div>

        <!-- Export & Import -->
        <div class="settings-section">
          <h3>Export & Import</h3>
          <div class="export-controls">
            <button data-action="json">ğŸ“„ Als JSON exportieren</button>
            <button data-action="csv">ğŸ“Š Als CSV exportieren</button>
            <button data-action="pdf">ğŸ“‹ Als PDF exportieren</button>
            <button data-action="image">ğŸ–¼ï¸ Als Bild exportieren</button>
            <button data-action="import">ğŸ“¥ Daten importieren</button>
            <button data-action="backup">ğŸ’¾ Backup erstellen</button>
            <button data-action="restore">ğŸ”„ Backup wiederherstellen</button>
          </div>
          <p class="hint">Alle Daten werden sicher in IndexedDB gespeichert und Ã¼berleben Browser-Cache-LÃ¶schungen.</p>
        </div>
      </section>
    </main>

    <footer class="app-footer">
      <div>Made with â¤ï¸ for students</div>
      <div style="margin-top:0.5rem;font-size:0.75rem;opacity:0.4;">
        <a href="/impressum.html" style="color:inherit;text-decoration:none;margin:0 0.5rem;" onmouseover="this.style.opacity='0.8'" onmouseout="this.style.opacity='0.4'">Impressum</a>
        <span>â€¢</span>
        <a href="/datenschutz.html" style="color:inherit;text-decoration:none;margin:0 0.5rem;" onmouseover="this.style.opacity='0.8'" onmouseout="this.style.opacity='0.4'">Datenschutz</a>
      </div>
    </footer>

    <!-- jsPDF fÃ¼r aktiven PDF-Export -->
    <script src="https://cdn.jsdelivr.net/npm/jspdf@2.5.1/dist/jspdf.umd.min.js" integrity="sha384-czH3Vq2m3pGTRS+E3Hc0hR2B6Jxw3sIs3IcP2+g4kxfqv9b2k4tTQhE7QjFZb8hO" crossorigin="anonymous"></script>
    
    <!-- Service Worker Registration -->
    <script>
      if ('serviceWorker' in navigator) {
        window.addEventListener('load', () => {
          navigator.serviceWorker.register('/sw.js')
            .then(reg => console.log('Service Worker registered:', reg))
            .catch(err => console.log('Service Worker registration failed:', err))
        })
      }
    </script>
    
    <script type="module" src="src/js/app.js"></script>
  </body>
</html>
